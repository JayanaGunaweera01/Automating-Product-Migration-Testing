name: Execute Migration Ubuntu

on:
  workflow_run:
    workflows: ["Composite Workflow 🐧🍎🪟"]
    types:
      - completed
jobs:
  execute-migration:
    runs-on: ${{ github.event.inputs.os }}
    steps:
      - name: 💾 Checkout code
        uses: actions/checkout@v2
      - name: 🚀 Execute Migration Automation Script
        run: |
          chmod +x migration-automation/ubuntu-os/migration-script-ubuntu.sh 
          sh migration-automation/ubuntu-os/migration-script-ubuntu.sh "${{ github.event.inputs.urlOld }}" "${{ github.event.inputs.urlNew }}" "${{ github.event.inputs.currentVersion }}" "${{ github.event.inputs.migratingVersion }}" "${{ github.event.inputs.database }}" "${{ github.event.inputs.os }}" "${{ secrets.MIGRATION_EMAIL }}" "${{ secrets.MIGRATION_PASSWORD }}" | tee "migration-automation/logs.txt"
        continue-on-error: true

